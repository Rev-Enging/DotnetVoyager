@import '../../styles/variables.scss';

.code-viewer {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
    background-color: $bg-dark;
    height: 100%;

    .tabs-bar {
        height: 36px;
        background-color: $bg-sidebar;
        border-bottom: 1px solid $border-color;
        display: flex;
        align-items: center;

        .tab-btn {
            height: 100%;
            padding: 0 16px;
            border: none;
            border-right: 1px solid $border-color;
            background: transparent;
            color: $text-secondary;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;

            &:hover { background-color: $bg-hover; }

            &.active {
                background-color: $bg-dark;
                color: $text-white;
                border-top: 2px solid $accent-purple;
            }

            .icon-cs { color: #4ade80; }
            .icon-il { color: #9ca3af; }
        }
    }

    .code-content-area {
        flex: 1;
        display: flex;
        overflow: hidden;

        &.resizing {
            cursor: col-resize;
            user-select: none;
            pointer-events: none; // Запобігаємо взаємодії з кодом під час зміни розміру
        }

        .resizer {
            width: 4px;
            height: 100%;
            background-color: $border-color;
            cursor: col-resize;
            flex-shrink: 0; // Не дозволяємо роздільнику стискатися

            &:hover {
                background-color: $accent-purple;
            }
        }

        .panel {
            padding: 16px;
            overflow: auto;
            font-family: 'Consolas', 'Monaco', monospace;

            &.csharp-panel {
                border-right: 1px solid $border-light;
            }

            &.il-panel {
                background: #1e1e1e;
            }

            // Якщо тільки один режим (csharp або il)
            &:only-child {
                flex: 1;
                width: auto !important; // Перевизначаємо style={} для одного режиму
            }

            .lang-label {
                color: $text-secondary;
                margin-bottom: 8px;
                position: sticky;
                top: 0;
                padding-bottom: 8px;
                background: inherit;
                z-index: 3;
            }

            pre.code-block {
                margin: 0;
                white-space: pre;
                width: fit-content;
                min-width: 100%;
            }
        }
    }
}